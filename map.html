<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
 	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="icon" href="https://jscdn.com.cn/highcharts/images/favicon.ico">
	<meta name="description" content="">
	<script src="https://img.hcharts.cn/jquery/jquery-1.8.3.min.js" type="text/javascript"></script>
	<script src="https://img.hcharts.cn/highmaps/highmaps.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.6/proj4.js" type="text/javascript"></script>
	<script src="https://api.map.baidu.com/api?v=2.0&ak=UOEIa3qh3qL8A4AGpWECzoNgtOaUWgfE" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/china.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/beijing.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/tianjin.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/hebei.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/shanxi.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/neimenggu.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/liaoning.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/jilin.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/heilongjiang.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/shanghai.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/jiangsu.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/zhejiang.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/anhui.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/fujian.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/jiangxi.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/shandong.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/henan.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/hubei.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/hunan.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/guangdong.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/guangxi.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/hainan.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/chongqing.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/sichuan.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/guizhou.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/yunnan.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/xizang.js" type="text/javascript" ></script>
	<script src="https://data.jianshukeji.com/geochina/shanxi2.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/gansu.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/qinghai.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/ningxia.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/xinjiang.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/xianggang.js" type="text/javascript"></script>
	<script src="https://data.jianshukeji.com/geochina/aomen.js" type="text/javascript"></script>

	<title>地图随机选点</title>
	<style>
	.box-hidden {
		width: 1px;
		height: 1px;
	}
	.box-top {
    width: 49%;
    height: 600px;
    display: inline-block;
    text-align: center;
    font-size: 14px;
}
	.box-bottom {
    width: 49%;
    height: 20px;
    display: inline-block;
    text-align: center;
    font-size: 14px;
}
    .box-top>div {
    width: 100%;
    height: 100%;
}
input {
    width: 250px;
    padding: 4px 10px;
    outline: none;
}

	</style>

</head>
<body>
<!--
*************************************************************************
    Generated by JShare at 2019-03-04 23:28:37
    From: https://code.hcharts.cn/newbie/OENsuX
*************************************************************************
-->
<div class="box-top">
    <div id="container"></div>
</div>
<div class="box-top">
    <div id="labmap"></div>
</div>
<div class="box-bottom">
	<table align="center">
    <tr>
			<td>手动输入经纬度（纬度,经度）：</td>
			<td> <input id="lonlat" type="text" placeholder="经度" value="39.9032724643,116.4009203787"></td>
			<td><button id="specific_search">定位并查找所在区域</button></td>
		</tr>
    <tr>
			<td>随机产生经纬度（纬度,经度）：</td>
			<td><input id="lonlat_random" type="text" readonly=true></td>
			<td><button id="random_search">按省份随机选点</button></td>
		</tr>
	</table>
    <p>推荐使用：<a href="http://www.gpsspg.com/maps.htm" target="_blank">http://www.gpsspg.com/maps.htm</a> 获取经纬度</p>
</div>
<div class="box-bottom">
    百度地图 <b>右键</b> 选点定位
</div>
<p align="center">Last Modified Date: 2019-03-10</p>
<p align="center">Powered By <a href="https://www.highcharts.com" target="_blank">Highcharts</a>, <a href="http://lbsyun.baidu.com/" target="_blank">Baidu Map</a></p>
<div>

</div>
<div class = "box-hidden">
<div id="beijing" hidden="true"></div>
<div id="tianjin" hidden="true"></div>
<div id="hebei" hidden="true"></div>
<div id="shanxi" hidden="true"></div>
<div id="neimenggu" hidden="true"></div>
<div id="liaoning" hidden="true"></div>
<div id="jilin" hidden="true"></div>
<div id="heilongjiang" hidden="true"></div>
<div id="shanghai" hidden="true"></div>
<div id="jiangsu" hidden="true"></div>
<div id="zhejiang" hidden="true"></div>
<div id="anhui" hidden="true"></div>
<div id="fujian" hidden="true"></div>
<div id="jiangxi" hidden="true"></div>
<div id="shandong" hidden="true"></div>
<div id="henan" hidden="true"></div>
<div id="hubei" hidden="true"></div>
<div id="hunan" hidden="true"></div>
<div id="guangdong" hidden="true"></div>
<div id="guangxi" hidden="true"></div>
<div id="hainan" hidden="true"></div>
<div id="chongqing" hidden="true"></div>
<div id="sichuan" hidden="true"></div>
<div id="guizhou" hidden="true"></div>
<div id="yunnan" hidden="true"></div>
<div id="xizang" hidden="true"></div>
<div id="shanxi2" hidden="true"></div>
<div id="gansu" hidden="true"></div>
<div id="qinghai" hidden="true"></div>
<div id="ningxia" hidden="true"></div>
<div id="xinjiang" hidden="true"></div>
<div id="xianggang" hidden="true"></div>
<div id="aomen" hidden="true"></div>
</div>


	<script>
	var provinces_name = ["beijing", "tianjin", "hebei", "shanxi", "neimenggu", "liaoning", "jilin", "heilongjiang",
		"shanghai", "jiangsu", "zhejiang", "anhui", "fujian", "jiangxi", "shandong", "henan", "hubei", "hunan",
		"guangdong", "guangxi", "hainan", "chongqing", "sichuan", "guizhou", "yunnan", "xizang", "shanxi2",
		"gansu", "qinghai", "ningxia", "xinjiang", "xianggang", "aomen"];
	var provinces_chinese = ["北京市", "天津市", "河北省", "山西省", "内蒙古自治区", "辽宁省", "吉林省", "黑龙江省",
		"上海市", "江苏省", "浙江省", "安徽省", "福建省", "江西省", "山东省", "河南省", "湖北省", "湖南省",
		"广东省", "广西壮族自治区", "海南省", "重庆市", "四川省", "贵州省", "云南省", "西藏自治区", "陕西省",
		"甘肃省", "青海省", "宁夏回族自治区", "新疆维吾尔自治区", "香港特别行政区", "澳门特别行政区"];
	var prov_maps = [];
	var prov_mapData = [];
	var prov_data = [];
	/**
     * 找出经纬度所在区域例子
     *
     * 基于 Highmaps 定位经纬度并找出所以区域（省份），实现算法 PNPoly
     *
     * blog：
     *
     * by: john@jianshukeji.com
     */
var mapData = Highcharts.maps['cn/china'],
    data = [],
    map,
    rects = [];
Highcharts.each(mapData.features, function(d) {
    data.push({
        name: d.properties.name,
        value: Math.random() * 1000
    });
});
map = Highcharts.mapChart('container', {
    mapNavigation: {
        enabled: true
    },
    legend: {
        enabled: false
    },
    title: {
        text: null
    },
    series: [{
        mapData: mapData,
        joinBy: 'name',
        data: data
    }, {
        type: 'mappoint',
        data: [{
            lat: 39.9032724643, // 经纬度查询请到 http://www.gpsspg.com/maps.htm
            lon: 116.4009203787,
            name: '北京'
        }]
    }]
});
	/**
     * 各省份的地图数据
     *
     * by: chzf_zju@163.com
     */
for (var i = 0; i < 33; ++i)
{
	var mapname = 'cn/' + provinces_name[i];
	prov_mapData[i] = Highcharts.maps[mapname];
	prov_data[i] = [];
	Highcharts.each(prov_mapData[i].features, function(e) {
    prov_data[i].push({
        name: e.properties.name,
        value: Math.random() * 1000
    });
  });
	prov_maps[i] = [];
	prov_maps[i] = Highcharts.mapChart(provinces_name[i], {
    mapNavigation: {
        enabled: true
    },
    legend: {
        enabled: false
    },
    title: {
        text: null
    },
    series: [{
        mapData: prov_mapData[i],
        joinBy: 'name',
        data: prov_data[i]
    }, {
        type: 'mappoint',
        data: [{
            lat: 39.9032724643, // 经纬度查询请到 http://www.gpsspg.com/maps.htm
            lon: 116.4009203787,
            name: '北京'
        }]
    }]
  });
}

// 百度地图相关代码
var bmap = new BMap.Map('labmap'); // 创建地图实例  
var point = new BMap.Point(105, 37.9); // 中心点坐标  
bmap.centerAndZoom(point, 5); // 设置中心点坐标和缩放级别，最大19，最小0
bmap.addControl(new BMap.NavigationControl());	//平移拖放控件
bmap.addControl(new BMap.ScaleControl());	//缩放地图控件
bmap.addControl(new BMap.OverviewMapControl());	//缩略图
bmap.addControl(new BMap.MapTypeControl()); //地图类型
bmap.addControl(new BMap.GeolocationControl());	//定位控件
bmap.enableScrollWheelZoom(true);
bmap.enableInertialDragging();
bmap.enableContinuousZoom();
var menu = new BMap.ContextMenu();
menu.addItem(new BMap.MenuItem('获取经纬度定位', function(e) {
    $('#lonlat').val(e.lat + ',' + e.lng);
    var area_name = findPointInMap(e.lng, e.lat, -1);
    showPointInMap(e.lng, e.lat, area_name);
    bmap.clearOverlays();
}));
menu.addItem(new BMap.MenuItem('取消', function() {
}));
bmap.addContextMenu(menu);

// 指定经纬度搜索 
$('#specific_search').click(function() {
    var val = $('#lonlat').val(),
        tmp = val.split(',');
        prov_number = -1;
    if (tmp.length === 2) {
        var area_name = findPointInMap(tmp[1], tmp[0], -1);
        showPointInMap(tmp[1], tmp[0], area_name);
        markInBaiduMap(tmp[1], tmp[0]);
    }
});
	/**
     * 按省份随机进行搜索
     *
     * by: chzf_zju@163.com
     */
$('#random_search').click(function() {
        var lonlat, area_name;
        var prov_number = Math.random() * 33; //[0, 33)
        prov_number = Math.floor(prov_number); //向下取整
        do {
            lonlat = get_random_lonlat_of_area_range(prov_number)
            area_name = findPointInMap(lonlat[0], lonlat[1], prov_number);
        }while(!area_name)
        showPointInMap(lonlat[0], lonlat[1], area_name);
        $('#lonlat_random').val(lonlat[1] + ',' + lonlat[0]);
        markInBaiduMap(lonlat[0], lonlat[1]);
});

	/**
     * 各省份经纬度的大致范围
     *
     * by: chzf_zju@163.com
     */
function get_random_lonlat_of_area_range(prov_number)
{
		var lon, lat;
    switch (prov_number) {
		case -1:	/*全国*/
			do {
				lon = Math.random() * 64 + 72; //[72, 136)
				lat = Math.random() * 37 + 17; //[17, 54)
				if ( lon > 124 && lat < 38)
				  continue;
				if ( lon < 96 && lat < 26)
				  continue;
				if ( lon > 92 && lon < 114 && lat > 46)
				  continue;
				break;
			}while(1)
			break;
		case 0:
			lon = Math.random() * 2.4 + 115.2; //[115.2, 117.6)
			lat = Math.random() * 1.8 + 39.3; //[39.3, 41.1)
			break;
		case 1:
			lon = Math.random() * 1.6 + 116.6; //[116.6, 118.2)
			lat = Math.random() * 1.8 + 38.5; //[38.5, 40.3)
			break;
		case 2:
			lon = Math.random() * 7 + 113; //[113, 120)
			lat = Math.random() * 7 + 35.8; //[35.8, 42.8)
			break;
		case 3:
			lon = Math.random() * 4.9 + 110; //[110, 114.9)
			lat = Math.random() * 6.5 + 34.4; //[34.4, 40.9)
			break;
		case 4:
			lon = Math.random() * 30 + 96.9; //[96.9, 126.9)
			lat = Math.random() * 16.7 + 37; //[37, 53.7)
			break;
		case 5:
			lon = Math.random() * 7.4 + 118.6; //[118.6, 126)
			lat = Math.random() * 5.1 + 38.5; //[38.5, 43.6)
			break;
		case 6:
			lon = Math.random() * 10.6 + 121.1; //[121.1, 131.7)
			lat = Math.random() * 6 + 40.5; //[40.5, 46.5)
			break;
		case 7:
			lon = Math.random() * 15.4 + 120.6; //[120.6, 136)
			lat = Math.random() * 10.8 + 43; //[43, 53.8)
			break;
		case 8:
			lon = Math.random() * 1.4 + 120.8; //[120.8, 122.2)
			lat = Math.random() * 1.4 + 30.5; //[30.5, 31.9)
			break;
		case 9:
			lon = Math.random() * 5.9 + 116.2; //[116.2, 122.1)
			lat = Math.random() * 4.6 + 30.6; //[30.6, 35.2)
			break;
		case 10:
			lon = Math.random() * 5.1 + 117.9; //[117.9, 123)
			lat = Math.random() * 4.3 + 27; //[27, 31.3)
			break;
		case 11:
			lon = Math.random() * 5.4 + 114.6; //[114.6, 120)
			lat = Math.random() * 5.7 + 29.1; //[29.1, 34,8)
			break;
		case 12:
			lon = Math.random() * 5.2 + 115.6; //[115.6, 120.8)
			lat = Math.random() * 5.3 + 23.2; //[23.2, 28.5)
			break;
		case 13:
			lon = Math.random() * 4.6 + 113.4 ; //[113.4, 118.0)
			lat = Math.random() * 6.1 + 24.2; //[24.2, 30.3)
			break;
		case 14:
			lon = Math.random() * 8.5 + 114.5; //[114.5, 123)
			lat = Math.random() * 4.3 + 34.1; //[34.1, 38.4)
			break;
		case 15:
			lon = Math.random() * 7 + 110; //[110, 117)
			lat = Math.random() * 5.4 + 31.1; //[31.1, 36.5)
			break;
		case 16:
			lon = Math.random() * 8.5 + 108; //[108, 116.5)
			lat = Math.random() * 4.9 + 28.6; //[28.6, 33.5)
			break;
		case 17:
			lon = Math.random() * 6 + 108.5; //[108.5, 114.5)
			lat = Math.random() * 6 + 24.3; //[24.3, 30.3)
			break;
		case 18:
			lon = Math.random() * 8.2 + 109.3; //[109.3, 117.5)
			lat = Math.random() * 5.8 + 19.8; //[19.8, 25.6)
			break;
		case 19:
			lon = Math.random() * 8.3 + 104.1; //[104.1, 112.4)
			lat = Math.random() * 5.5 + 21.1; //[21.1, 26.6)
			break;
		case 20:
			lon = Math.random() * 4 + 108.3; //[108.3, 112.3)
			lat = Math.random() * 2.5 + 17.8; //[17.8, 20.3)
			break;
		case 21:
			lon = Math.random() * 5.5 + 105; //[105, 110.5)
			lat = Math.random() * 4.4 + 28; //[28, 32.4)
			break;
		case 22:
			lon = Math.random() * 12 + 97; //[97, 109)
			lat = Math.random() * 8.9 + 25.6; //[25.6, 34.5)
			break;
		case 23:
			lon = Math.random() * 6.5 + 103.5; //[103.5, 110)
			lat = Math.random() * 5.2 + 24.2; //[24.2, 29.4)
			break;
		case 24:
			lon = Math.random() * 9.5 + 97.1; //[97.1, 106.6)
			lat = Math.random() * 8.7 + 20.8; //[20.8, 29.5)
			break;
		case 25:
			lon = Math.random() * 21.6 + 78; //[78, 99.6)
			lat = Math.random() * 10.5 + 26.4; //[26.4, 36.9)
			break;
		case 26:
			lon = Math.random() * 6.7 + 105.1; //[105.1, 111.8)
			lat = Math.random() * 8.5 + 31.3; //[31.3, 39.8)
			break;
		case 27:
			lon = Math.random() * 17.2 + 92; //[92, 109.2)
			lat = Math.random() * 10.8 + 32.2; //[32.2, 43)
			break;
		case 28:
			lon = Math.random() * 14.2 + 89.2; //[89.2, 103.4)
			lat = Math.random() * 8.3 + 31.1; //[31.1, 39.4)
			break;
		case 29:
			lon = Math.random() * 4 + 104; //[104, 108)
			lat = Math.random() * 4.5 + 35; //[35, 39.5)
			break;
		case 30:
			lon = Math.random() * 24 + 73; //[73, 97)
			lat = Math.random() * 15.8 + 33.7; //[33.7, 49.5)
			break;
		case 31:
			lon = Math.random() * 0.9 + 113.7; //[113.7, 114.6)
			lat = Math.random() * 0.6 + 22; //[22, 22.6)
			break;
		case 32:
			lon = Math.random() * 0.2 + 113.5; //[113.5, 113.7)
			lat = Math.random() * 0.2 + 22; //[22, 22.2)
			break;
		}
	return [lon, lat];
}
	/**
     * 搜索之后在百度地图上标点
     *
     * by: chzf_zju@163.com
     */
function markInBaiduMap(lon, lat){
    var point = new BMap.Point(lon, lat);
    var myIcon = new BMap.Icon("http://api.map.baidu.com/img/markers.png", new BMap.Size(23, 25));
    var marker2 = new BMap.Marker(point, {icon: myIcon}); 
    bmap.clearOverlays();
    bmap.addOverlay(marker2);
    var gc = new BMap.Geocoder();
    var addrComp;
    gc.getLocation(point, function(rs){
        var addrComp = rs.addressComponents;
        // 弹出窗口信息
        var winInfo = "<p style='font-size:14px;'>" + addrComp.province + ", " + addrComp.city + ", " +
        addrComp.district + "</p>";
        var infoWindow = new BMap.InfoWindow(winInfo);
        marker2.openInfoWindow(infoWindow);
        //marker2.addEventListener("click", function(){
        //  this.openInfoWindow(infoWindow); 
        // }); 
    });
}

function showPointInMap(lon, lat, name) {
    var point = lonlatToXY(lon, lat);
    var newPoint = {
            x: point[0],
            y: point[1]
        };
    newPoint.name = name;
    map.series[1].points[0].update(newPoint);

}
function findPointInMap(lon, lat, num) {
    if (num < -1 || num > 32) return null;
    var continue_search = (num === -1)?true:false;
    if(num === -1) {
      var search_number = 0;
    }
    else {
      var search_number = num;
    }
    do {
        var point = lonlatToXY(lon, lat),
            i = 0,
            length = prov_maps[search_number].series[0].points.length,
            
            area = null;
        // if (rects.length > 0) {
        //     rects.forEach(function(r) {
        //         r.destroy();
        //     });
        //     rects = [];
        // }
        for (; i < length; i++) {
            if (pointInArea(point, prov_maps[search_number].series[0].points[i])) {
                area = prov_maps[search_number].series[0].points[i];
                break;
            }
        }
        if (area) break;
        ++search_number;
    }while(continue_search && search_number < 33)
    return area ? '所在区域：' + provinces_chinese[search_number] + '-' + area.name : null;
}

function pointInArea(point, area) {
    var x = point[0],
        y = point[1],
        xAxis = map.xAxis[0],
        yAxis = map.yAxis[0];
    if (x < area._minX || x > area._maxX || y > area._maxY || y < area._minY) {
        return false;
    }
    // var rect = map.renderer.rect(xAxis.toPixels(area._minX), yAxis.toPixels(area._minY), xAxis.toPixels(area._maxX) - xAxis.toPixels(area._minX), yAxis.toPixels(area._maxY) - yAxis.toPixels(area._minY))
    //     .attr({
    //         'stroke-width': 1,
    //         stroke: 'red',
    //         zIndex: 100
    //     })
    //     .add();
    // rects.push(rect);
    var paths = area.path,
        i = 0,
        currentPoint = null,
        lastPoint = null,
        firstPoint = null,
        even = false,
        top_number = 0,
        bottom_number = 0,
        left_number = 0,
        right_number = 0,
        length = paths.length;
    for (; i < length; i++) {
        if (Highcharts.isNumber(paths[i])) {
            if (even) { // 偶数时才构成一个 x,y 点
                currentPoint = [paths[i - 1], paths[i]];
                even = !even;
            } else {
                even = !even;
                continue;
            }
            if (lastPoint) { /*有前一个点*/
                // 根据 PNPoly 算法来计算点是否在区域内
                // 参考链接：
                // * http://www.cnblogs.com/armyfai/p/3529243.html
                // * http://riyueshi.github.io/2015/10/07/is_point_in_polygon/
                if ((lastPoint[1] > y) !== (currentPoint[1] > y))
                {
                    if (x < (lastPoint[0] - currentPoint[0]) * (y - currentPoint[1]) / (lastPoint[1] - currentPoint[1]) + currentPoint[0])
                        ++right_number;
                    if (x > (lastPoint[0] - currentPoint[0]) * (y - currentPoint[1]) / (lastPoint[1] - currentPoint[1]) + currentPoint[0])
                        ++left_number;
                }
					/**
					* 计算两条线，更保险
					*
					* by: chzf_zju@163.com
					*/
                if ( 
                    (lastPoint[0] > x) !== (currentPoint[0] > x)
                ) {
                    if(y < (lastPoint[1] - currentPoint[1]) * (x - currentPoint[0]) / (lastPoint[0] - currentPoint[0]) + currentPoint[1])
                        ++top_number;
                    if(y > (lastPoint[1] - currentPoint[1]) * (x - currentPoint[0]) / (lastPoint[0] - currentPoint[0]) + currentPoint[1])
                        ++bottom_number;
                }
            } else { /*是第一个点*/
                firstPoint = currentPoint;
            }
            lastPoint = currentPoint;
        }
    }
    // 补充计算最后一个点和第一个点
    if (
        (lastPoint[1] > y) !== (firstPoint[1] > y)
    ) {
        if(x < (lastPoint[0] - firstPoint[0]) * (y - firstPoint[1]) / (lastPoint[1] - firstPoint[1]) + firstPoint[0])
              ++right_number;
        if(x > (lastPoint[0] - firstPoint[0]) * (y - firstPoint[1]) / (lastPoint[1] - firstPoint[1]) + firstPoint[0])
              ++left_number;
    }
    if (
        (lastPoint[0] > x) !== (firstPoint[0] > x)
    ) {
        (y < (lastPoint[1] - firstPoint[1]) * (x - firstPoint[0]) / (lastPoint[0] - firstPoint[0]) + firstPoint[1])
              ++top_number;
        (y > (lastPoint[1] - firstPoint[1]) * (x - firstPoint[0]) / (lastPoint[0] - firstPoint[0]) + firstPoint[1])
              ++bottom_number;
    }
    return (top_number%2 && bottom_number%2) || (left_number%2 && right_number%2);
}
// Highmaps 默认的坐标系统参数
var transform = {
    "crs": "+proj=lcc +lat_1=18 +lat_2=24 +lat_0=21 +lon_0=114 +x_0=500000 +y_0=500000 +ellps=WGS72 +towgs84=0,0,1.9,0,0,0.814,-0.38 +units=m +no_defs",
    "scale": 0.000129831107685,
    "jsonres": 15.5,
    "jsonmarginX": -999,
    "jsonmarginY": 9851.0,
    "xoffset": -3139937.49309,
    "yoffset": 4358972.7486
};
/**
     * 经纬度转换函数
     * @param float lon 经度
     * @param float lat 纬度
     * @return [x, y]
     */
function lonlatToXY(lon, lat) {
    if (typeof lon === 'string') {
        lon = parseFloat(lon);
    }
    if (typeof lat === 'string') {
        lat = parseFloat(lat);
    }
    var projected = proj4(transform.crs, [lon, lat]),
        cosAngle = transform.cosAngle || (transform.rotation && Math.cos(transform.rotation)),
        sinAngle = transform.sinAngle || (transform.rotation && Math.sin(transform.rotation)),
        rotated = transform.rotation ? [projected[0] * cosAngle + projected[1] * sinAngle, -projected[0] * sinAngle + projected[1] * cosAngle] : projected;
    return [
        parseInt(((rotated[0] - (transform.xoffset || 0)) * (transform.scale || 1) + (transform.xpan || 0)) * (transform.jsonres || 1) + (transform.jsonmarginX || 0)),
        parseInt((((transform.yoffset || 0) - rotated[1]) * (transform.scale || 1) + (transform.ypan || 0)) * (transform.jsonres || 1) - (transform.jsonmarginY || 0))
    ];
}
</script>
</body>
</html>
